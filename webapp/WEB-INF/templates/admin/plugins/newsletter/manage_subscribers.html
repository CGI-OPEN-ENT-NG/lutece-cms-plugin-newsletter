<script type="text/javascript"> 
	function toggle_checkboxes() {
	    if (!document.getElementById){ return; }
	    if (!document.getElementsByTagName){ return; }
	    var inputs = document.getElementById("subscribers_form").getElementsByTagName("input");
	    for(var x=0; x < inputs.length; x++) {
	        if ( (inputs[x].type == 'checkbox') && (inputs[x].name != "select_all" ) ) {
	            inputs[x].checked = !inputs[x].checked;
	        }
	    }
	} 
</script>

<div class="content-box">
    <h2>#i18n{newsletter.manage_subscribers.boxTitle}</h2>
    <div class="highlight-box">
        <form method="post" action="jsp/admin/plugins/newsletter/ManageSubscribers.jsp">
        	<p>
        		<label for="subscriber_search">#i18n{newsletter.manage_subscribers.searchTitle} :</label>
            	<input size="30" type="text" name="subscriber_search" value="${search_string!}" />
        	</p>
        	<p>
	            <input type="hidden" name="newsletter_id" value="${newsletter.id}" />
	            <input type="submit" value="#i18n{newsletter.manage_subscribers.buttonSearch}" class="button" />
        	</p>
        </form>
    </div>
    
    <form method="post" action="jsp/admin/plugins/newsletter/ManageSubscribers.jsp">
        <@paginationAdmin paginator=paginator combo=1 form=0/>
        <input type="hidden" name="subscriber_search" value="${search_string!}" />
		<input type="hidden" name="newsletter_id" value="${newsletter.id}" />
    </form>
    <form id="subscribers_form" name="subscribers_form" action="jsp/admin/plugins/newsletter/DoActionSelection.jsp">
    	<input type="hidden" name="newsletter_id" value="${newsletter.id}" />
    	<input type="submit" tabindex="10" class="button" value="#i18n{newsletter.manage_subscribers.buttonDelete}"/>
	    <table>
	        <tr>
	         	<th width="5%"><input id="select_all" name="select_all" type="checkbox" onclick="toggle_checkboxes();" /></th>
	            <th>
	            	#i18n{newsletter.manage_subscribers.columnTitleEmail}
	            	<@sort jsp_url="jsp/admin/plugins/newsletter/ManageSubscribers.jsp" attribute="email&amp;newsletter_id=${newsletter.id!}&amp;subscriber_search=${search_string!}" />
	            </th>
	            <th>
	            	#i18n{newsletter.manage_subscribers.columnTitleSubscriptionDate}
	            	<@sort jsp_url="jsp/admin/plugins/newsletter/ManageSubscribers.jsp" attribute="dateSubscription&amp;newsletter_id=${newsletter.id!}&amp;subscriber_search=${search_string!}" />
	            </th>
	            <#if display_status>
	            <th>
	            	#i18n{newsletter.manage_subscribers.columnTitleStatus}
	            </th>
	            </#if>
	            <th>
	            	#i18n{newsletter.manage_subscribers.columnTitleDelete}
	            </th>
	        </tr>
	        <#list subscribers_list as subscriber>
	        <tr>
	        	<td>						
					<input id="subscriber_selection" name="subscriber_selection" type="checkbox" value="${subscriber.id}" />
				</td>
	            <td>${subscriber.email}</td>
	            <td>${subscriber.dateSubscription}</td>
	            <#if display_status>
	            <td>
	            	<#if subscriber.confirmed> 
	            	<img src="images/admin/skin/enable.png" alt="#i18n{newsletter.manage_subscribers.enabled}" title="#i18n{newsletter.manage_subscribers.enabled}">
	            	<#else>
	            	<img src="images/admin/skin/disable.png" alt="#i18n{newsletter.manage_subscribers.disabled}" title="#i18n{newsletter.manage_subscribers.disabled}">
	            	</#if>
	            </td>
	            </#if>
	            <td>
	                <a href="jsp/admin/plugins/newsletter/UnsubscribeNewsLetter.jsp?subscriber_id=${subscriber.id}&newsletter_id=${newsletter.id}">
	                    <img src="images/admin/skin/actions/delete.png" border="0">
	                </a>
	            </td>
	        </tr>
	        </#list>
	    </table>
    </form>
    <@paginationAdmin paginator=paginator />
    
    <#if is_add_subscriber_right>
        <form method="post" action="jsp/admin/plugins/newsletter/DoAddSubscriber.jsp">
            <input size="30" type="text" name="email" value="" />
            <input type="hidden" name="newsletter_id" value="${newsletter.id}" />
            <input type="submit" value="#i18n{newsletter.manage_subscribers.buttonAdd}" class="button" />
        </form>
    </#if>
    
    <#if is_import_subscriber_right>
        <form method="post" action="jsp/admin/plugins/newsletter/ImportSubscribers.jsp">
            <input type="hidden" name="newsletter_id" value="${newsletter.id}" />
            <input type="submit" value="#i18n{newsletter.manage_subscribers.buttonImport}" class="button" />
        </form>
    </#if>
</div>
